---
comments: false
date: 2014-06-03
layout: post
permalink: /2014/06/git-diff-on-mac-using-tkdiff.html
title: git diff on a mac using tkdiff
---

<h1>{{ page.title }}</h1>
<div class='post'>
<div class="markdown-here-wrapper" data-md-url="https://draft.blogger.com/blogger.g?blogID=10963130#editor/target=post;postID=7860977817874554510;onPublishedMenu=allposts;onClosedMenu=allposts;postNum=0;src=link" markdown-here-wrapper-content-modified="true"><div style="margin: 1.2em 0px !important;">I’m just getting used to git at my new job. I’m liking it a lot. One thing I miss is the side by side diffs we used to get with our code review tool and even tkdiff before that.</div><div style="margin: 1.2em 0px !important;">Here’s how I got it working on my machine:<br /><br /><span style="font-family: Courier New, Courier, monospace;">brew install tkdiff</span><br /><span style="font-family: Courier New, Courier, monospace;">git config --global diff.tool tkdiff</span><br /><span style="font-family: Courier New, Courier, monospace;">git config --global difftool.prompt false</span><br /><br />and I needed to add this to my .bashrc to get the Git.pm module available:<br /><br /><span style="font-family: Courier New, Courier, monospace;">if [ -r /usr/local/lib/perl5/site_perl ]; then</span><br /><span style="font-family: Courier New, Courier, monospace;">&nbsp; export PERLLIB=/usr/local/lib/perl5/site_perl:$PERLLIB</span><br /><span style="font-family: Courier New, Courier, monospace;">fi</span><br /><br />next up, I did start using <a href="http://www.kaleidoscopeapp.com/" target="_blank">Kaleidoscope</a>. I like it a lot. but then I saw rubymine's diffs and I got a bit jealous.<br /><br />NOTE: this is super helpful to stop those .orig files lying around<br /><br /><span style="font-family: Courier New, Courier, monospace;">git config --global mergetool.keepBackup false</span><br /><br />-------------------------------------------------------------------------------<br /><br />If for some reason you're using super old git then these instructions might work.</div><pre style="margin: 1.2em 0px;">brew install tkdiff<br />git config --global diff.external ~/bin/share/git-diff-wrapper.sh<br />git config --global --replace-all core.pager "less -F -X"<br /><br /><span style="font-size: 1em; line-height: 1.2em;"><span style="font-family: Times, Times New Roman, serif;">~/bin/share/git-diff-wrapper.sh is this file:</span></span></pre><pre style="margin: 1.2em 0px;">#!/bin/bash<br /># http://stackoverflow.com/questions/255202/<br /><br /># diff is called by git with 7 parameters:<br /># path old-file old-hex old-mode new-file new-hex new-mode<br /><br />DIFF_PROG=$(which tkdiff)<br /><br />if [ ! -x "$DIFF_PROG" ]; then<br /> DIFF_PROG=$(which diff)<br /> if [ ! -x "$DIFF_PROG" ]; then<br /> DIFF_PROG=/usr/bin/diff<br /> fi<br />fi<br /><br />"$DIFF_PROG" "$2" "$5"<br /><br /><span style="font-size: 1em; line-height: 1.2em;"><span style="font-family: Times, Times New Roman, serif;">The most common thing I want to do is see how much my current branch’s file differs from the master branch:</span></span></pre><pre style="font-family: Consolas, Inconsolata, Courier, monospace; font-size: 0.85em; font-size: 1em; line-height: 1.2em; margin: 1.2em 0px;"><code class="language-bash" style="background-color: #f8f8f8; background: rgb(248, 248, 255); border-bottom-left-radius: 3px; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(204, 204, 204); border: 1px solid rgb(234, 234, 234); color: #333333; display: block; display: inline; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 0.85em; margin: 0px 0.15em; overflow: auto; padding: 0.5em 0.7em; padding: 0.5em; padding: 0px 0.3em; white-space: pre-wrap; white-space: pre;">git diff origin/master -- app.coffee</code></pre>git difftool is the new way I've been doing that.<br /><br />also to revert a single file do this...<br /><br /><span style="font-family: Courier New, Courier, monospace;">git checkout -- app.coffee</span><br /><br /></div></div>
<h2>Comments</h2>
<div class='comments'>
</div>
