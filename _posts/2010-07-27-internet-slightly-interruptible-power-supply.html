---
comments: false
date: 2010-07-27
layout: post
permalink: /2010/07/internet-slightly-interruptible-power.html
title: Internet slightly interruptible power supply
---

<h1>{{ page.title }}</h1>
<div class='post'>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_P1IABrKRUwU/TE7jdAp__mI/AAAAAAAAWak/nKTUsSt6XR4/s288/IMG_0002.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/_P1IABrKRUwU/TE7jdAp__mI/AAAAAAAAWak/nKTUsSt6XR4/s288/IMG_0002.jpg" /></a></div>My internet connection is provided by a 5Ghz wireless connection to a tower about 10 miles away via a horizontally pointing dish. This dish needs a line of sight view of the tower and I don't have a good one from my house. Luckily my neighbors are friendly and let me set the dish in their backyard. Now the power for this dish and the little WRT54G router comes from their house. When the power goes out (as it frequently does in the winter) the little UPS in the trashcan that holds all this only lasts for up to 30 minutes. Oftentimes the power is out for several days. Then I only end up with internet while I'm running my generator and they're running theirs too.<div><br /></div><div>The solution is a 72Ah $60 deep cycle marine battery from Costco, a <a href="http://www.amazon.com/gp/product/B000U0JCPO">2A battery maintainer</a> and a few relays and electronics. The Linksys <a href="http://kioan.users.uth.gr/wireless/wrt54g/supply.html">WRT54G power requirements</a>&nbsp;are well documented and feeding 12v from a marine battery would be fine. The dish however had a 24V power supply and since it'd be very hard to replace I didn't want to feed it with a lower voltage. Luckily I found a this&nbsp;<a href="http://www.virtualvillage.com/12v-to-24v-dc-dc-power-converter-module-003602-013.html">12v to 24v converter</a>&nbsp;which worked a treat.</div><div><br /></div><div>My original plan was to just run the charger into the battery and run the power off the battery at the same time. I ran like this for about a week and monitored the voltage on the battery and it was dropping. It's understandable that the 2A charger couldn't supply enough power to the router, dish AND charge the battery, so I put back in the old wall warts to power everything and went back to the drawing board.</div><div><div><br /></div></div><div>I got 2 12V relays from Radio Shack and set it up so that when the router wall wart was powered all power to the dish and router came from the outlets. As soon as the power goes out the power from the battery is used. It works well. During the power switch the dish and router reset which is fine by me, I guess I could fix that with a large capacitor or something. and the 12V to 24V converter is always on the battery which is sub optimal but not awful.</div><div><br /></div><div>I wired it all up such that I can put it in and out of the system easily. This allows me to bring it home to work on and install it easily without bothering my neighbors too much. I meant to get a picture of it installed, but they came home and I didn't want to bother them anymore than I already had. I used <a href="http://www.ocraces.org/powerpole.html">Anderson PowerPole</a> connectors for the battery connection and I can see why radio hams like them so much, they're so easy to work with, I'm now a big fan.&nbsp;</div><div><br /></div><div>I haven't load tested the system yet to see how long the battery can keep everything running during an extended outage. I also don't hold much hope that the 2A charger will get the battery back to charged in a super quick time, but it's already proven it can recharge it after about a week.</div><div><br /></div><div>I do plan to <a href="http://www.rwhitby.net/projects/wrt54gs">add serial ports to my WRT54G</a> and then <a href="http://martybugs.net/electronics/tempsensor/hardware.cgi">add a 1wire reader</a>&nbsp;to read a&nbsp;<a href="http://www.maxim-ic.com/datasheet/index.mvp/id/2919">DS2438 voltage monitor</a> to monitor the voltage of the battery remotely. That will be a whole other blog post if I ever get it to work. Once I do get it working I'll feel more comfortable about turning off the power so I can monitor the battery voltage and not let it get too low. I suspect it might work for up to a week with no power input at all.</div><div><br /></div><div>Now I want to have a similar system at home in the AV closet where my&nbsp;Ethernet&nbsp;switches and home wireless router are. I'm planning on getting a <a href="http://www.powerwerx.com/west-mountain-radio/rigrunner-4004-usb.html">RigRunner 4004 USB</a> and running 12 gauge wire from the vented wood-box with the battery in it into the AV closet where I'll use an old laptop battery as an&nbsp;alternate&nbsp;70W 12V power supply. the USB ports will also help me charge my phone during an extended power outage.</div></div>
<h2>Comments</h2>
<div class='comments'>
</div>
